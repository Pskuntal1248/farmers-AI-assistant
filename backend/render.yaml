# Render.com Deployment Configuration
# Build Command: mvn clean package -DskipTests
# Start Command: java -jar target/*.jar

services:
  - type: web
    name: kishan-mitra-backend
    env: java
    region: oregon
    plan: free
    buildCommand: mvn clean package -DskipTests
    startCommand: java -Dserver.port=$PORT -jar target/*.jar
    healthCheckPath: /api/ping
    envVars:
      - key: JAVA_VERSION
        value: "17"
      - key: MAVEN_VERSION
        value: "3.9"
      - key: GEMINI_API_KEY
        sync: false
      - key: GEMINI_SECONDARY_API_KEY
        sync: false
      - key: GEMINI_TERTIARY_API_KEY
        sync: false
      - key: GEMINI_QUATERNARY_API_KEY
        sync: false
      - key: OPENWEATHERMAP_API_KEY
        sync: false
      - key: TRANSLATE_GOOGLE_API_KEY
        sync: false
      - key: SPRING_PROFILES_ACTIVE
        value: production
      - key: JAVA_OPTS
        value: "-XX:+UseContainerSupport -XX:MaxRAMPercentage=75.0 -XX:+UseG1GC"
    autoDeploy: true
